<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyEasy AI Helper</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .nav-bar {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }

        .nav-link {
            background: rgba(255, 255, 255, 0.95);
            color: #667eea;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            display: inline-block;
            cursor: pointer;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            background: white;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            text-align: center;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .stats-detailed {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card-detailed {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(17, 153, 142, 0.3);
            transition: transform 0.3s;
        }

        .stat-card-detailed:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(17, 153, 142, 0.4);
        }

        .stat-card-detailed:nth-child(2) {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            box-shadow: 0 8px 20px rgba(250, 112, 154, 0.3);
        }

        .stat-card-detailed:nth-child(2):hover {
            box-shadow: 0 12px 25px rgba(250, 112, 154, 0.4);
        }

        .stat-card-detailed:nth-child(3) {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
            box-shadow: 0 8px 20px rgba(48, 207, 208, 0.3);
        }

        .stat-card-detailed:nth-child(3):hover {
            box-shadow: 0 12px 25px rgba(48, 207, 208, 0.4);
        }

        .stat-card-detailed:nth-child(4) {
            background: linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%);
            box-shadow: 0 8px 20px rgba(255, 110, 127, 0.3);
        }

        .stat-card-detailed:nth-child(4):hover {
            box-shadow: 0 12px 25px rgba(255, 110, 127, 0.4);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 20px;
        }

        .chart-title {
            text-align: center;
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .date-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .date-selector label {
            font-size: 1.1em;
            color: #555;
            font-weight: 600;
        }

        .date-selector input[type="date"] {
            padding: 10px 15px;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .date-selector input[type="date"]:hover {
            border-color: #764ba2;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }

        .date-selector button {
            padding: 10px 20px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button.active {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .period-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .period-btn {
            padding: 10px 25px;
            font-size: 0.95em;
        }

        .welcome-message {
            text-align: center;
            color: #555;
            font-size: 1.1em;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .greeting {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .quote {
            font-style: italic;
            color: #666;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid rgba(102, 126, 234, 0.3);
        }

        .quote-author {
            font-size: 0.9em;
            color: #888;
            margin-top: 5px;
        }

        .milestone-badge {
            display: inline-block;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(245, 87, 108, 0.3);
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .stat-number {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <a class="nav-link" onclick="showPage('main')">üìä Main Dashboard</a>
        <a class="nav-link" onclick="showPage('moreData')">üìà More Data</a>
    </div>

    <!-- Main Dashboard Page -->
    <div id="mainPage" class="page active">
        <div class="container">
            <h1>üìä EasyEasy AI Helper</h1>
            <p class="subtitle">Your personal visit history</p>
            
            <div class="welcome-message" id="welcomeMessage">Loading...</div>
            
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalVisits">0</div>
                    <div class="stat-label">Total Visits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="currentStreak">0</div>
                    <div class="stat-label">Day Streak üî•</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="daysLogged">0</div>
                    <div class="stat-label" id="daysLoggedLabel">Days Logged</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="currentTime">--:--</div>
                    <div class="stat-label">Current Time</div>
                </div>
            </div>

            <div class="period-selector">
                <button class="period-btn active" onclick="changePeriod(30)">Last 30 Days</button>
                <button class="period-btn" onclick="changePeriod(40)">Last 40 Days</button>
                <button class="period-btn" onclick="changePeriod(50)">Last 50 Days</button>
            </div>

            <h3 class="chart-title">üïê Visit Times Throughout the Day</h3>
            <div class="date-selector">
                <label for="dateFilter">Select Date:</label>
                <input type="date" id="dateFilter" onchange="filterByDate()">
                <button onclick="showAllDates()">Show All Dates</button>
            </div>
            <div class="chart-container">
                <canvas id="visitChart"></canvas>
            </div>

            <h3 class="chart-title">üìÖ Login Activity Tracker</h3>
            <div class="chart-container">
                <canvas id="activityChart"></canvas>
            </div>

            <div class="button-group">
                <button onclick="addTestData()">Add Test Data</button>
                <button onclick="clearData()">Clear All Data</button>
                <button onclick="exportData()">Export Data</button>
            </div>
        </div>
    </div>

    <!-- More Data Page -->
    <div id="moreDataPage" class="page">
        <div class="container">
            <h1>üìà Detailed Statistics</h1>
            <p class="subtitle">Deep dive into your activity patterns</p>

            <div class="stats-detailed">
                <div class="stat-card-detailed">
                    <div class="stat-number" id="mostActiveTime2">--:--</div>
                    <div class="stat-label">üïê Most Active Time</div>
                </div>
                <div class="stat-card-detailed">
                    <div class="stat-number" id="avgVisitsPerDay2">0</div>
                    <div class="stat-label">üìä Avg Visits/Day</div>
                </div>
                <div class="stat-card-detailed">
                    <div class="stat-number" id="favoriteDay2">-</div>
                    <div class="stat-label">üìÖ Favorite Day</div>
                </div>
                <div class="stat-card-detailed">
                    <div class="stat-number" id="dailyGoalProgress2">0%</div>
                    <div class="stat-label">üéØ Daily Goal (3 visits)</div>
                </div>
            </div>

            <div class="welcome-message">
                <h3 style="margin-bottom: 15px; color: #667eea;">üìä Usage Insights</h3>
                <div id="insightsText" style="line-height: 1.8; color: #555;">Loading insights...</div>
            </div>
        </div>
    </div>

    <script>
        let visitChart;
        let activityChart;
        let visits = [];
        let currentPeriod = 30;
        let selectedDate = null;

        const quotes = [
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { text: "It does not matter how slowly you go as long as you do not stop.", author: "Confucius" },
            { text: "Everything you've ever wanted is on the other side of fear.", author: "George Addair" },
            { text: "Believe in yourself. You are braver than you think, more talented than you know, and capable of more than you imagine.", author: "Roy T. Bennett" },
            { text: "I learned that courage was not the absence of fear, but the triumph over it.", author: "Nelson Mandela" },
            { text: "There is only one way to avoid criticism: do nothing, say nothing, and be nothing.", author: "Aristotle" },
            { text: "Do what you can with all you have, wherever you are.", author: "Theodore Roosevelt" },
            { text: "Success is not how high you have climbed, but how you make a positive difference to the world.", author: "Roy T. Bennett" },
            { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" },
            { text: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
            { text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { text: "Keep your face always toward the sunshine‚Äîand shadows will fall behind you.", author: "Walt Whitman" },
            { text: "What lies behind us and what lies before us are tiny matters compared to what lies within us.", author: "Ralph Waldo Emerson" },
            { text: "The best time to plant a tree was 20 years ago. The second best time is now.", author: "Chinese Proverb" },
            { text: "Your time is limited, don't waste it living someone else's life.", author: "Steve Jobs" },
            { text: "Whether you think you can or you think you can't, you're right.", author: "Henry Ford" },
            { text: "The only person you are destined to become is the person you decide to be.", author: "Ralph Waldo Emerson" },
            { text: "Go confidently in the direction of your dreams! Live the life you've imagined.", author: "Henry David Thoreau" },
            { text: "When you have a dream, you've got to grab it and never let go.", author: "Carol Burnett" },
            { text: "Nothing is impossible. The word itself says 'I'm possible!'", author: "Audrey Hepburn" },
            { text: "There is nothing impossible to they who will try.", author: "Alexander the Great" },
            { text: "The bad news is time flies. The good news is you're the pilot.", author: "Michael Altshuler" },
            { text: "Life has got all those twists and turns. You've got to hold on tight and off you go.", author: "Nicole Kidman" },
            { text: "Keep your eyes on the stars, and your feet on the ground.", author: "Theodore Roosevelt" },
            { text: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis" },
            { text: "Try to be a rainbow in someone else's cloud.", author: "Maya Angelou" },
            { text: "You do not find the happy life. You make it.", author: "Camilla Eyring Kimball" }
        ];

        async function init() {
            await loadVisits();
            await logVisit();

            setDefaultDate();
            updateWelcomeMessage();
            updateStats();
            updateDetailedStats();
            createVisitChart();
            createActivityChart();
            updateClock();
            setInterval(updateClock, 1000);
        }

        function showPage(pageName) {
            document.getElementById('mainPage').classList.remove('active');
            document.getElementById('moreDataPage').classList.remove('active');
            if (pageName === 'main') {
                document.getElementById('mainPage').classList.add('active');
            } else {
                document.getElementById('moreDataPage').classList.add('active');
                updateDetailedStats();
            }
        }

        async function loadVisits() {
            const stored = localStorage.getItem('visit-times');
            if (stored) {
                visits = JSON.parse(stored);
            }
        }

        async function saveVisits() {
            localStorage.setItem('visit-times', JSON.stringify(visits));
        }

        async function logVisit() {
            const now = new Date();
            visits.push({
                timestamp: now.toISOString(),
                date: now.toLocaleDateString(),
                time: now.toLocaleTimeString()
            });
            await saveVisits();
        }

        function updateWelcomeMessage() {
            const hour = new Date().getHours();
            let greeting = "";
            if (hour >= 6 && hour < 12) greeting = "‚òÄÔ∏è Good morning!";
            else if (hour < 18) greeting = "üå§Ô∏è Good afternoon!";
            else if (hour < 24) greeting = "üåô Good evening!";
            else greeting = "üåü Burning the midnight oil?";

            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            const milestone = checkMilestones();

            const html = `
                <div class="greeting">${greeting}</div>
                <div>${visits.length === 1 ? 'üéâ Welcome! This is your first visit!' : 'üëã Welcome back! Visit #' + visits.length}</div>
                ${milestone ? `<div class="milestone-badge">${milestone}</div>` : ''}
                <div class="quote">"${randomQuote.text}"</div>
                <div class="quote-author">‚Äî ${randomQuote.author}</div>
            `;
            document.getElementById('welcomeMessage').innerHTML = html;
        }

        function checkMilestones() {
            const total = visits.length;
            const streak = calculateStreak();
            if (total === 1) return "üéâ First visit!";
            if ([10, 50, 100, 500, 1000].includes(total)) return `üèÜ ${total} visits milestone!`;
            if ([7, 30, 100].includes(streak)) return `üî• ${streak}-day streak!`;
            return null;
        }

        function calculateStreak() {
            if (visits.length === 0) return 0;
            const uniqueDates = [...new Set(visits.map(v => v.date))].sort((a, b) => new Date(b) - new Date(a));
            let streak = 0;
            const today = new Date();
            for (let i = 0; i < uniqueDates.length; i++) {
                const checkDate = new Date(today);
                checkDate.setDate(checkDate.getDate() - i);
                if (uniqueDates.includes(checkDate.toLocaleDateString())) {
                    streak++;
                } else {
                    break;
                }
            }
            return streak;
        }

        function updateStats() {
            document.getElementById('totalVisits').textContent = visits.length;
            document.getElementById('currentStreak').textContent = calculateStreak();
            const uniqueDays = getUniqueDaysInPeriod(currentPeriod);
            document.getElementById('daysLogged').textContent = `${uniqueDays}/${currentPeriod}`;
            document.getElementById('daysLoggedLabel').textContent = `Days (Last ${currentPeriod})`;
        }

        function updateDetailedStats() {
            document.getElementById('mostActiveTime2').textContent = getMostActiveTime();
            document.getElementById('avgVisitsPerDay2').textContent = getAverageVisitsPerDay();
            document.getElementById('favoriteDay2').textContent = getFavoriteDay();
            document.getElementById('dailyGoalProgress2').textContent = getDailyGoalProgress();
            generateInsights();
        }

        function getMostActiveTime() {
            if (visits.length === 0) return "--:--";
            const hours = {};
            visits.forEach(v => {
                const h = new Date(v.timestamp).getHours();
                hours[h] = (hours[h] || 0) + 1;
            });
            let maxHour = 0;
            let maxCount = 0;
            for (const [h, count] of Object.entries(hours)) {
                if (count > maxCount) {
                    maxCount = count;
                    maxHour = h;
                }
            }
            return `${maxHour}:00`;
        }

        function getAverageVisitsPerDay() {
            if (visits.length === 0) return "0";
            const uniqueDays = new Set(visits.map(v => v.date)).size;
            return (visits.length / uniqueDays).toFixed(1);
        }

        function getFavoriteDay() {
            if (visits.length === 0) return "-";
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const dayCounts = {};
            visits.forEach(v => {
                const day = new Date(v.timestamp).getDay();
                dayCounts[day] = (dayCounts[day] || 0) + 1;
            });
            let maxDay = 0;
            let maxCount = 0;
            for (const [day, count] of Object.entries(dayCounts)) {
                if (count > maxCount) {
                    maxCount = count;
                    maxDay = day;
                }
            }
            return dayNames[maxDay];
        }

        function getDailyGoalProgress() {
            const today = new Date().toLocaleDateString();
            const todayVisits = visits.filter(v => v.date === today).length;
            const progress = Math.min(100, Math.round((todayVisits / 3) * 100));
            return `${progress}%`;
        }

        function generateInsights() {
            if (visits.length === 0) {
                document.getElementById('insightsText').innerHTML = "No data yet. Start visiting to see insights!";
                return;
            }
            const streak = calculateStreak();
            const avg = getAverageVisitsPerDay();
            const favDay = getFavoriteDay();
            const peak = getMostActiveTime();
            const hour = parseInt(peak.split(':')[0]);
            let timeText = "";
            if (hour >= 6 && hour < 12) timeText = "morning person";
            else if (hour < 18) timeText = "afternoon enthusiast";
            else timeText = "night owl";

            const insights = `
                üìç You're a <strong>${timeText}</strong> - most active around ${peak}<br>
                üìÖ <strong>${favDay}</strong> is your favorite day to visit<br>
                üî• Current streak: <strong>${streak} day${streak !== 1 ? 's' : ''}</strong><br>
                üìä You average <strong>${avg} visits per day</strong><br>
                ${avg >= 3 ? 'üéâ Great consistency! Keep it up!' : 'üí™ Try to hit 3 visits per day for better tracking!'}
            `;
            document.getElementById('insightsText').innerHTML = insights;
        }

        function getUniqueDaysInPeriod(days) {
            const now = new Date();
            const startDate = new Date(now.getTime() - (days * 24 * 60 * 60 * 1000));
            const uniqueDates = new Set();
            visits.forEach(visit => {
                const visitDate = new Date(visit.timestamp);
                if (visitDate >= startDate) {
                    uniqueDates.add(visit.date);
                }
            });
            return uniqueDates.size;
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleTimeString();
        }

        function setDefaultDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dateFilter').value = today;
            selectedDate = new Date().toLocaleDateString();
        }

        function filterByDate() {
            const dateInput = document.getElementById('dateFilter').value;
            selectedDate = dateInput ? new Date(dateInput).toLocaleDateString() : null;
            createVisitChart();
        }

        function showAllDates() {
            selectedDate = null;
            document.getElementById('dateFilter').value = '';
            createVisitChart();
        }

        function changePeriod(days) {
            currentPeriod = days;
            document.querySelectorAll('.period-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateStats();
            createActivityChart();
        }

        function createVisitChart() {
            const ctx = document.getElementById('visitChart').getContext('2d');
            let filteredVisits = visits;
            if (selectedDate) filteredVisits = visits.filter(v => v.date === selectedDate);

            const visitsByHour = {};
            filteredVisits.forEach(visit => {
                const hour = new Date(visit.timestamp).getHours();
                visitsByHour[hour] = (visitsByHour[hour] || 0) + 1;
            });

            const labels = Object.keys(visitsByHour).sort((a, b) => a - b).map(h => `${h}:00`);
            const data = labels.map(l => visitsByHour[parseInt(l.split(':')[0])]);

            if (visitChart) visitChart.destroy();

            const title = selectedDate ? `Visits on ${selectedDate}` : 'All Visit Times';

            visitChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels.length ? labels : ['No data'],
                    datasets: [{
                        label: 'Number of Visits',
                        data: labels.length ? data : [0],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: labels.length ? title : 'No visits yet' }
                    },
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        function createActivityChart() {
            const ctx = document.getElementById('activityChart').getContext('2d');
            const now = new Date();
            const labels = [];
            const data = [];

            for (let i = currentPeriod - 1; i >= 0; i--) {
                const date = new Date(now.getTime() - (i * 24 * 60 * 60 * 1000));
                const dateStr = date.toLocaleDateString();
                labels.push(dateStr);
                data.push(visits.some(v => v.date === dateStr) ? 1 : 0);
            }

            if (activityChart) activityChart.destroy();

            activityChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Activity',
                        data: data,
                        backgroundColor: data.map(val => val === 1 ? 'rgba(118, 75, 162, 0.8)' : 'rgba(200, 200, 200, 0.3)'),
                        borderColor: data.map(val => val === 1 ? '#764ba2' : '#ccc'),
                        borderWidth: 1,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.y === 1 ? '‚úì Logged in' : '‚úó No login';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            ticks: {
                                callback: function(value) {
                                    return value === 1 ? '‚úì' : '‚úó';
                                }
                            }
                        },
                        x: {
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }

        async function addTestData() {
            const now = new Date();
            const testVisits = [];
            const numDays = 12;
            for (let i = 0; i < numDays; i++) {
                const daysAgo = Math.floor(Math.random() * 30);
                const date = new Date(now.getTime() - (daysAgo * 24 * 60 * 60 * 1000));
                const visitsPerDay = Math.floor(Math.random() * 4) + 2;
                for (let v = 0; v < visitsPerDay; v++) {
                    const hour = Math.floor(Math.random() * 18) + 6;
                    const minute = Math.floor(Math.random() * 60);
                    const ts = new Date(date.getFullYear(), date.getMonth(), date.getDate(), hour, minute);
                    testVisits.push({
                        timestamp: ts.toISOString(),
                        date: ts.toLocaleDateString(),
                        time: ts.toLocaleTimeString()
                    });
                }
            }
            visits.push(...testVisits);
            await saveVisits();
            location.reload();
        }

        function clearData() {
            if (confirm('Are you sure you want to clear all visit data? This cannot be undone.')) {
                visits = [];
                localStorage.removeItem('visit-times');
                location.reload();
            }
        }

        function exportData() {
            const dataStr = JSON.stringify(visits, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'visit-history.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        init();
    </script>
</body>
</html>
